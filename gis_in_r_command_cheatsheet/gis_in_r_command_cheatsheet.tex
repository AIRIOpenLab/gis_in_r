\documentclass[10pt]{article} 
\usepackage{amsfonts, amsmath, amssymb} 
\usepackage{dcolumn, multirow} 
\usepackage{setspace} 
\usepackage{epsfig, subfigure, subfloat, graphicx}
\usepackage{anysize, indentfirst, setspace} 
\usepackage{verbatim, rotating, paralist}
\usepackage{latexsym} 
\usepackage{amsthm} 
\usepackage{fullpage} 
\usepackage{graphicx} 
\usepackage{amsfonts} 
\usepackage{dsfont} 
\usepackage{comment} 
\usepackage{hyperref}
\usepackage{multicol}
\usepackage{txfonts} 
\usepackage{parskip} 

\setlength{\columnsep}{1cm}
\usepackage{enumitem}
\setlist{nosep}

\usepackage[margin=2.5cm]{geometry}

\title{GIS in R Command Cheat Sheet}
\date{\today}


\begin{document} 
\maketitle
% \begin{multicols}{2}

%%%%%%%%%%
% Installing
%%%%%%%%%%
	
\centerline{\textbf{Installation of Relevant Packages}}
\textbf{Packages:}
\begin{itemize}
	\item \texttt{sp}: tools for spatial data of all types
	\item \texttt{raster}: extra tools for very large raster datasets
	\item \texttt{rgdal}: tools for reading and writing files in different formats
\end{itemize}
\textbf{Installation:}\\
Update R to version $>$ 3.1.\\
On Windows:
\begin{itemize}
	\item \texttt{install.packages(c(``sp'',``raster''))}
	\item \texttt{install.packages(``rgdal'')}
\end{itemize}
On OSX:
	\begin{itemize}
		\item \texttt{install.packages(c(``sp'',``raster''))}
		\item Download and install 	\href{http://www.kyngchaos.com/files/software/frameworks/GDAL_Complete-1.11.dmg}{\underline{GDAL Complete}}
		\item Download \href{http://www.kyngchaos.com/files/software/frameworks/rgdal-0.9.1-1.dmg}{\underline{rgdal}} package. 
		\item Open .dmg file and place \texttt{rgdal\_0.9-1.tgz} on desktop.
		\item Run \texttt{install.packages("$\sim$/Desktop/rgdal\_0.9-1.tgz",repos=NULL)}
	\end{itemize}



\section*{Vector Data}

%%%%%%%%%%
% Creating from Scratch
%%%%%%%%%%

\centerline{\textbf{Creating Spatial Objects From Scratch}} 
\underline{\textbf{Points:}}\\

\textbf{Points}: \texttt{SpatialPoints([matrix of coordinates])}
\begin{itemize}
	\item Note: if latitude and longitude coordinates, must be ordered longitude (x-coordinate), latitude (y-coordinate)
\end{itemize}
\textbf{Points with DF}: \texttt{SpatialPointsDataFrame([Spatial Points Obj], [DataFrame])}\\
\\
\underline{\textbf{Lines:}}\\

\textbf{Line (single geometric line)}: \texttt{Line([matrix of coordinates of vertices])}\\
\textbf{Lines (single ``observations'' potentially consisting of several basic lines, like a river)}:\\ 
\hspace*{1cm} \texttt{Lines([list of Line Objs], [names for Line objs])}\\
\textbf{SpatialLines (collection of ``observations'', like shapefile)}: \\
\hspace*{1cm} \texttt{SpatialLines([list of Line\textbf{s} Objs], [names for Lines objs])}\\
\textbf{Spatial Lines with DF}: \texttt{SpatialLinesDataFrame([SpatialLines Obj, DataFrame])}\\
\\
\underline{\textbf{Polygons:}} \\

\textbf{Polygon (one geometric shape defined by a single enclosing line)}: \\
\hspace*{1cm}\texttt{Polygon([matrix of coordinates of vertices])} \\
\textbf{Polygons (single ``observations'' potentially consisting of several basic shapes)}:\\ 
\hspace*{1cm} \texttt{Polygons([list of Polygon Objs], [names for Polygon objs])}\\
\textbf{SpatialPolygons (collection of ``observations'', like shapefile)}:\\
\hspace*{1cm} \texttt{SpatialPolygons([list of Polygon\textbf{s} Objs], [names for Polygons objs])}\\
\textbf{Spatial Polygons with DF}: \texttt{SpatialPolygonsDataFrame([SpatialPolygons Obj, DataFrame])}


%%%%%%%%%%
% Load from Files
%%%%%%%%%%

\hrulefill \\ 
\centerline{\textbf{Loading Spatial Objects from Files}} \\
\underline{\textbf{GPS Coordinates in Table:}}\\
\begin{enumerate}
	\item Use \texttt{read.csv()} to import DataFrame with lat long coordinates.
	\item \texttt{coordinates([DataFrame]) <- c([name of column with long],[name of column with lat])}
	\begin{itemize}
		\item Note reverse ordering: longitude (x-coordinate), then latitude (y-coordinate).
	\end{itemize}
\end{enumerate}
\underline{\textbf{Vector-Based Files:}}\\
\texttt{data <- readOGR(dsn=[path to FOLDER holding data], layer=[name of shapefile in folder])}
\begin{itemize}
	\item Note: do not include extension (like \texttt{.shp} in \texttt{layer} argument)
\end{itemize}

%%%%%%%%%%
% Interrogating
%%%%%%%%%%

\hrulefill \\ 
\centerline{\textbf{Interrogating Spatial Objects}} \\
\underline{\textbf{Summaries:} }\\
\textbf{Quick summary:} \texttt{summary([Spatial obj])}\\
\textbf{Longer summary of contents:} \texttt{str([Spatial obj])}\\
\textbf{Full list of contents:} \texttt{attributes([Spatial obj])}\\
\textbf{Check if projected:} \texttt{is.projected([Spatial obj])}\\

\underline{\textbf{Extract Attributes:} }\\
\textbf{Bounding Box:} \texttt{bbox([Spatial obj])}\\
\textbf{Get full projection info:} \texttt{proj4string([Spatial obj])}\\
\textbf{Get associated coordinates:} \texttt{coordinates([Spatial obj])}\\

%%%%%%%%%%
% Projections
%%%%%%%%%%

\hrulefill \\ 
\centerline{\textbf{Managing Projections}} \\
\href{http://www.spatialreference.org/}{\underline{\textbf{Projection code database}}} \\
\hspace{0.3cm}
\textbf{Assigning projection by EPSG code:} \texttt{proj4string([Spatial obj]) <-CRS("+init=EPSG:4326")}\\
\textbf{Get projection from Spatial obj:} \texttt{proj4string([Spatial obj])} \\
\textbf{Re-project:} \\
\hspace*{0.3cm}\texttt{newProjection <- CRS("projection string goes here")}\\
\hspace*{0.3cm}\texttt{spTransform([Spatial object],newProjection)}\\
\section*{Raster Data}


%%%%%%%%%%
% Creating from Scratch
%%%%%%%%%%

\centerline{\textbf{Creating Spatial Objects From Scratch}} 

\textbf{New Grid Topology:} \\
\texttt{newtopology <- GridTopology(cellcentre.offset=[center of South-West cell], \\
\hspace*{4cm} cellsize=[x and y size of each cell], \\
\hspace*{4cm} cells.dim=[number of cells in x and y])} \\
\emph{Example:} \texttt{newtopology <- GridTopology(cellcentre.offset=c(0,0), cellsize=c(1,1), cells.dim=c(5,5))} 

\textbf{Add Data:} \\
\texttt{SpGdf <- SpatialGridDataFrame([grid topology object], [DataFrame])}
\begin{itemize}
	\item DataFrame must have as many rows as topology has cells. Values in DataFrame are associated with cells in order starting in top left cell, moving across row left to row, then moving down one row and repeating, ending in bottom right cell. 
\end{itemize}

%%%%%%%%%%
% Acronyms
%%%%%%%%%%

\section*{Odds and Ends}
\underline{\textbf{Open-Source GIS Software Acronyms:} }\\

\noindent GIS tools in R are based on a set of tools developed by the open-source community and which underlie a great many GIS tools beside those available in R, including tools in Python and several stand-alone applications (like QGIS). As a result, there are a number of acronyms you're likely to find if you start googling GIS tools -- here's a quick guide to them. \\
\begin{itemize}
	\item \textbf{OSGeo}: Open-Source Geospatial Foundation; the group the manages the ecosystem of open-source GIS software. 
	\item \textbf{GDAL}: Geospatial Data Abstraction Library. Once upon a time, OSGeo published two sets of tools -- OGR for working with vector data, and GDAL for working with raster data. In recent years, however, these tools have converged, so GDAL \emph{usually} used to refer to the full library created by OSGeo. In R, however, the older meanings often still apply, which is why \texttt{readGDAL()} is for reading raster data and \texttt{readOGR()} is for reading vector data. 
	\item \textbf{OGR}: OpenGIS Simple Features Reference (I think?). At one time OGR was the set of tools published by OSGeo for manipulating vector data. OGR is now officially a part of GDAL (which is why it comes in the \texttt{rgdal} library). 
	\item \textbf{proj4}: proj4 is standard format for describing projections.
	\item \textbf{GRASS}: An OSGeo platform designed to unify the GDAL tools in a graphical user interface. 
	\item \textbf{QGIS}: An open-source program designed specifically to be an alternative to ArcGIS based on the GDAL library. 
\end{itemize}
Want to know more? \href{https://trac.osgeo.org/gdal/wiki/FAQGeneral#WhatdoesOGRstandsfor}{\underline{Check out the OSGeo FAQs!}}

%\end{multicols}



\end{document}
